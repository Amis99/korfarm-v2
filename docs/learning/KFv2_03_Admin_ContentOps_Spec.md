# 국어농장 v2 관리자 등록 및 운영 규격서

## 1. 관리자 종류
- 본사 관리자
- 제휴기관 관리자

## 2. 권한 규칙

### 2.1 학습 데이터 관리 권한
- 본사 관리자
  - 모든 학습 콘텐츠 생성, 수정, 삭제 가능
- 제휴기관 관리자
  - 본사 생성 학습은 열람만 가능
  - 기관 생성 학습은 생성, 수정, 삭제 가능

## 3. 관리자 페이지 핵심 메뉴

### 3.1 학생 관리
- 학생 목록
- 학생 상세 카드
  - 학생 정보
  - 학습 수행 수, 수행 시간
  - 학습 히스토리
  - 학습 정확도
  - 학습 영역별 통계
  - 테스트 결과, 테스트 통계
  - 지식과 지혜 글쓰기 히스토리
  - 첨삭 내용
  - 코멘트 내용

### 3.2 수강반 관리
- 수강반 생성, 수정, 삭제
- 학생은 복수 수강반 등록 가능
- 필터 시스템
  - 학년, 레벨, 기관, 수강반, 기간, 수행 여부

### 3.3 학습 데이터 관리
- 학습 유형 선택
- 메타 정보 입력
  - 대상 레벨, 영역, 세부 영역, 10대 역량, 제목, 태그
- JSON 업로드
- 스키마 검증
- 학습 미리보기
- 게시, 비공개, 종료
- 버전 관리
  - 게시된 버전은 수정 금지
  - 새 버전으로 복제하여 수정 후 게시

### 3.4 과제 배정
- 수강반별 배정
- 학생별 배정
- 과제는 콘텐츠 식별자와 수행 기한, 권장 횟수, 필수 여부를 포함
- 유료 회원에게만 과제 바구니 메뉴 노출

### 3.5 과제 현황
- 수강반별
- 학생별
- 특정 기간 수행 및 완료 현황

### 3.6 학생별 코멘트
- 날짜 지정 코멘트
- 입력, 수정, 삭제

### 3.7 학생 글쓰기 첨삭
- 지식과 지혜 글쓰기 결과 열람
- 코멘트, 첨삭, 재제출 요청

### 3.8 테스트 채점
- PDF 업로드
- 답안 입력
- 채점 및 분석
- 시험지별 통계
- 영역별 통계
- 테스트 히스토리

### 3.9 제휴 기관 관리
- 본사 관리자만
  - 기관 등록, 수정, 정산 정보 관리

### 3.10 쇼핑몰 관리
- 본사 관리자만
  - 교재 및 교구 등록
  - 판매 현황
  - 개인 회원 결제 내역
  - 제휴 기관 결제 내역

### 3.11 게시판 관리
- 학습 신청 게시판
- 커뮤니티 게시판
- 학습 질문 게시판
- 학습 자료 게시판
- 공지 관리, 댓글 관리, 신고 처리

## 4. 학습 콘텐츠 등록 플로

1. 학습 유형 선택
2. 메타 정보 입력
3. JSON 업로드
4. 즉시 검증
5. 미리보기
6. 상태 저장
7. 게시

### 4.1 미리보기 요구사항
- 미리보기는 실제 학습 엔진에서 구동됩니다.
- 미리보기는 로그 저장을 하지 않거나 별도 previewLog로 분리합니다.
- 미리보기에서 발견된 스키마 오류는 라인별, 필드별로 표시합니다.

## 5. 업로드 정책

### 5.1 JSON 업로드
- 파일 업로드 또는 에디터 입력
- 크기 제한 설정
- 저장 전 정규화
  - 키 순서 정리
  - 문자열 트림
  - 유니코드 정규화

### 5.2 PDF 업로드
- S3 저장
- 프리뷰 이미지 생성은 백엔드 또는 별도 배치로 처리 가능
- 콘텐츠 페이로드는 S3 key를 참조

## 6. 코딩 에이전트 지시문

- 관리자 페이지는 일반 사용자 프런트엔드와 분리된 라우트로 구성합니다.
- 역할 기반 접근 제어는 프런트에서 숨기는 방식만으로 처리하지 말고 백엔드에서 최종 검증합니다.
- JSON 스키마는 백엔드 단에서 단일 소스로 관리하고, 프런트는 이를 조회하여 검증에 사용합니다.
