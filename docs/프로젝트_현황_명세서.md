# 국어농장 v2 프로젝트 현황 명세서

최종 업데이트: 2026-02-05

---

## 1. 프로젝트 개요

국어 학습 플랫폼. 초1~고3 대상, 게이미피케이션(씨앗/수확물) 기반 학습 시스템.

- **프론트엔드**: React 19 + Vite 7 (포트 5173)
- **백엔드**: Spring Boot 3.2 + Kotlin (포트 8080)
- **DB**: MySQL 8.4 (로컬, root/korfarm)
- **GitHub**: https://github.com/Amis99/korfarm-v2 (master 브랜치)

---

## 2. 로컬 개발 환경 시작 방법

### 2-1. MySQL 시작

MySQL이 Windows 서비스로 등록되어 있지 않음. 수동 실행 필요:

```bash
# MySQL 서버 시작 (터미널 하나를 계속 열어둬야 함)
"C:\Program Files\MySQL\MySQL Server 8.4\bin\mysqld.exe" --datadir="C:\Users\RENEWCOM PC\mysql-data" --port=3306 --console
```

- DB명: `korfarm`
- 계정: root / korfarm

### 2-2. 백엔드 시작

```bash
cd "C:\Users\RENEWCOM PC\Documents\국어농장v2홈페이지\backend"
./gradlew bootRun
```

- http://localhost:8080/v1/health 로 확인

### 2-3. 프론트엔드 시작

```bash
cd "C:\Users\RENEWCOM PC\Documents\국어농장v2홈페이지\frontend"
npm run dev
```

- http://localhost:5173 에서 확인
- Vite 프록시 설정: `/v1` -> `http://localhost:8080`

---

## 3. 테스트 계정

| 구분 | 아이디 | 비밀번호 | 레벨 | 학년 | 역할 |
|------|--------|----------|------|------|------|
| 관리자 | admin | test1234 | 러셀1 | 중1 | HQ_ADMIN |
| 유료 회원 | paid | test1234 | 프레게2 | 초5 | STUDENT |
| 무료 회원 | free | test1234 | 소쉬르3 | 초3 | STUDENT |

---

## 4. 최근 구현 완료 (커밋됨)

| 커밋 | 기능 | 상세 |
|------|------|------|
| bbbc806 | 테스트 시스템, 관리자 페이지 개선 | 테스트 CRUD, 학생 관리 개선, 문서 추가 |
| 1694a5b | **회원가입 승인 시스템** | 학생/학부모/기관관리자 유형별 가입, 기관 승인 프로세스, 대기 페이지 |
| 9e1f920 | UI 개선 | 돌아가기 버튼, 글 삭제, 유료 회원 접근 제한 |
| 9b9b153 | 구독 관리 개선 | 구독 기간 및 결제 내역 표시 |
| d255528 | 반 관리 개선 | 학생 배정, 기관별 필터링, 페이지네이션 |
| 9730be4 | 기관 관리 개선 | 종류/주소 필드, 관리자 설정 |
| fae9afa | 지식과 지혜 | 글쓰기 게시판, 다중 페이지 원고지, 좋아요, 댓글 |

---

## 5. 주요 기능 구현 현황

### 핵심 기능 상태

| 기능 | 프론트 | 백엔드 | 상태 |
|------|--------|--------|------|
| 로그인/회원가입 | O | O | **완료** |
| **회원가입 승인 시스템** | O | O | **완료 (신규)** |
| 시작 페이지 (홈) | O | O | **완료** |
| 일일 퀴즈 | O | O | 데이터 부족 (1/365) |
| 일일 독해 | O | △ | 데이터 부족 |
| 커뮤니티 게시판 | O | O | **완료** |
| 지식과 지혜 (글쓰기) | O | O | **완료** |
| 랭킹 시스템 | O | O | **완료** |
| 쇼핑몰 | O | O | **완료** |
| 구독/결제 | O | O | 모의 결제 |
| 관리자 대시보드 | O | O | **완료** |
| 기관 관리 | O | O | **완료** |
| 반 관리 | O | O | **완료** |
| 학생 관리 | O | O | **완료** |
| 학부모 연결 | O | O | **완료** |
| 테스트 관리 | O | O | **완료** |
| 씨앗 경제 시스템 | O | O | **완료** |
| 대결 시스템 | O | O | WebSocket 연동 필요 |
| 과제 시스템 | O | O | 프론트 연결 필요 |

### 페이지 구현 현황 (63개)

**인증 (4개)**
- LoginPage, SignupPage, ResetPage, PendingApprovalPage

**메인 (3개)**
- LandingPage, StartPage, ProfilePage

**학습 (7개)**
- DailyQuizPage, DailyReadingPage, ProModePage, FarmModePage, FarmListPage
- LearningHubPage, LearningRunnerPage

**테스트 (6개)**
- TestStoragePage, TestDetailPage, TestOmrPage, TestReportPage, TestWrongNotePage, TestHistoryPage

**대결 (4개)**
- DuelMainPage, DuelWaitingRoomPage, DuelMatchPage, DuelResultPage

**커뮤니티 (3개)**
- CommunityPage, PostDetailPage, PostWritePage

**글쓰기 (4개)**
- WritingPage, WisdomBoardPage, WisdomWritePage, WisdomPostDetailPage

**쇼핑 (4개)**
- ShopPage, ProductDetailPage, SubscriptionPage, PaymentResultPage

**관리자 (18개)**
- AdminPage (대시보드)
- AdminMembershipApprovalPage (가입 승인)
- AdminOrgsPage (기관)
- AdminClassesPage (반)
- AdminStudentsPage (학생)
- AdminParentLinksPage (학부모)
- AdminContentPage, AdminContentPreviewPage (콘텐츠)
- AdminAssignmentsPage (과제)
- AdminWisdomPage, AdminWisdomDetailPage (지식과 지혜)
- AdminTestPage, AdminTestDetailPage (테스트)
- AdminSeasonsPage (시즌)
- AdminShopProductsPage, AdminShopOrdersPage (쇼핑몰)
- AdminPaymentsPage (결제)
- AdminReportsPage (신고)
- AdminFlagsPage (기능 플래그)

**기타 (10개)**
- RankingPage, AssignmentsPage, ParentLinksPage, StudentLinkConfirmPage
- DiagnosticPrintPage, OmrEntryPage, HarvestLedgerPage, SeedLogPage
- OpsStation

---

## 6. 학습 엔진 모듈 (9종)

| 모듈 키 | 모듈 파일 | 용도 |
|---------|----------|------|
| worksheet_quiz | WorksheetQuizModule.jsx | 객관식/빈칸 퀴즈 (일일 퀴즈 포함) |
| reading_intensive | ReadingIntensiveModule.jsx | 집중 독해 |
| reading_training | ReadingTrainingModule.jsx | 독해 훈련 |
| recall_cards | RecallCardsModule.jsx | 회상 카드 |
| confirm_click | ConfirmClickModule.jsx | 확인 클릭 |
| choice_judgement | ChoiceJudgementModule.jsx | 선택지 판별 |
| phoneme_change | PhonemeChangeModule.jsx | 음운 변동 |
| word_formation | WordFormationModule.jsx | 단어의 형성 |
| sentence_structure | SentenceStructureModule.jsx | 문장의 짜임 |

---

## 7. 레벨 체계 (12단계)

| 레벨 ID | 한글명 | 대상 학년 |
|---------|--------|-----------|
| saussure1 | 소쉬르1 | 초1 |
| saussure2 | 소쉬르2 | 초2 |
| saussure3 | 소쉬르3 | 초3 |
| frege1 | 프레게1 | 초4 |
| frege2 | 프레게2 | 초5 |
| frege3 | 프레게3 | 초6 |
| russell1 | 러셀1 | 중1 |
| russell2 | 러셀2 | 중2 |
| russell3 | 러셀3 | 중3 |
| wittgenstein1 | 비트겐슈타인1 | 고1 |
| wittgenstein2 | 비트겐슈타인2 | 고2 |
| wittgenstein3 | 비트겐슈타인3 | 고3 |

---

## 8. 남은 작업 (우선순위순)

### 높음 (즉시 필요)

| 작업 | 상세 | 비고 |
|------|------|------|
| **일일 퀴즈 데이터 생성** | 12레벨 x 365일 = 4,380개 JSON | 자동화 도구 필요 |
| **일일 독해 데이터 생성** | 12레벨 x 365일 | 자동화 도구 필요 |
| **씨앗 보상 실제 연동** | 일일 퀴즈/독해 제출 시 DB 반영 | API 호출 연결 |

### 중간 (1주일 내)

| 작업 | 상세 |
|------|------|
| Flyway 마이그레이션 정리 | ddl-auto=validate 원복, Flyway 재활성화 |
| 대결 시스템 프론트 연결 | WebSocket 기반 실시간 대결 연동 |
| 과제 시스템 완성 | StartPage "과제 바구니" 연결 |
| Feature Flag 등록 | daily_quiz, daily_reading 등 |

### 낮음 (향후)

| 작업 | 상세 |
|------|------|
| 실결제 연동 | 토스페이먼츠/카카오페이 등 |
| GitHub Pages 재배포 | base path 및 이미지 경로 수정 |
| 모바일 반응형 개선 | 일부 페이지 레이아웃 |
| 프로덕션 AWS 배포 | 인프라, 환경변수, HTTPS |

---

## 9. 기술 부채

| 항목 | 현황 | 조치 필요 |
|------|------|----------|
| Flyway | 비활성화, ddl-auto=update | 프로덕션 전 정리 |
| MySQL | 서비스 미등록, 수동 실행 | 서비스 등록 권장 |
| 환경변수 | application.yml에 하드코딩 | 분리 필요 |
| 테스트 코드 | 없음 | 핵심 로직 테스트 추가 |

---

## 10. 백엔드 API 주요 엔드포인트

### 인증
- `POST /v1/auth/signup` - 회원가입 (유형별: student/parent/org_admin)
- `POST /v1/auth/login` - 로그인
- `POST /v1/auth/logout` - 로그아웃
- `GET /v1/auth/me` - 내 프로필 (pendingApproval 포함)
- `GET /v1/auth/orgs` - 기관 목록

### 가입 승인 (신규)
- `GET /v1/admin/memberships/pending` - 승인 대기 목록
- `POST /v1/admin/memberships/{id}/approve` - 승인
- `POST /v1/admin/memberships/{id}/reject` - 거절

### 무료 학습
- `GET /v1/learning/daily-quiz` - 일일 퀴즈
- `POST /v1/learning/daily-quiz/submit` - 퀴즈 제출
- `GET /v1/learning/daily-reading` - 일일 독해
- `POST /v1/learning/daily-reading/submit` - 독해 제출

### 유료 학습
- `POST /v1/paid-learning/submit` - 유료 학습 제출

### 경제
- `GET /v1/inventory` - 인벤토리 (씨앗/수확물)
- `POST /v1/economy/harvest/craft` - 수확물 교환

---

## 11. 프로젝트 설정 참고

### application.yml 현재 상태
- `jpa.hibernate.ddl-auto`: **update** (원래 validate, 테스트용으로 변경됨)
- `flyway.enabled`: **false** (원래 true, 마이그레이션 충돌로 비활성화)
- DB: localhost:3306/korfarm, root/korfarm

### Flyway 마이그레이션 현황
- V0001 ~ V0014 (14개 파일)
- 최신: V0014__membership_approval.sql (회원가입 승인 시스템)

---

## 12. 파일 구조 요약

```
국어농장v2홈페이지/
├── frontend/                    (React + Vite)
│   ├── public/
│   │   ├── daily-quiz/          (일일 퀴즈 JSON 12레벨)
│   │   ├── daily-reading/       (일일 독해 JSON 12레벨)
│   │   └── korfarm-logo.png
│   ├── src/
│   │   ├── App.jsx              (라우팅)
│   │   ├── pages/               (63개 페이지)
│   │   ├── engine/              (학습 엔진 16개 파일)
│   │   ├── styles/              (14개 CSS)
│   │   ├── components/          (공통 컴포넌트)
│   │   ├── hooks/               (커스텀 훅)
│   │   └── utils/               (유틸리티)
│   ├── package.json
│   └── vite.config.js
│
├── backend/                     (Spring Boot + Kotlin)
│   ├── src/main/kotlin/com/korfarm/api/
│   │   ├── auth/                (인증)
│   │   ├── user/                (사용자)
│   │   ├── security/            (JWT 보안)
│   │   ├── org/                 (기관 + 가입승인)
│   │   ├── learning/            (무료 학습)
│   │   ├── paid/                (유료 학습)
│   │   ├── economy/             (씨앗 경제)
│   │   ├── season/              (시즌/랭킹)
│   │   ├── duel/                (대결)
│   │   ├── assignments/         (과제)
│   │   ├── board/               (게시판)
│   │   ├── shop/                (쇼핑몰)
│   │   ├── payment/             (결제)
│   │   ├── test/                (테스트)
│   │   ├── files/               (파일 업로드)
│   │   ├── system/              (기능 플래그)
│   │   └── contracts/           (API DTO)
│   ├── src/main/resources/
│   │   ├── application.yml
│   │   └── db/migration/        (Flyway V0001~V0014)
│   └── build.gradle.kts
│
└── docs/                        (문서)
    └── 프로젝트_현황_명세서.md
```

---

## 13. 권장 다음 단계

1. **일일 퀴즈/독해 데이터 자동 생성 도구** 개발
2. **씨앗 보상 API 연동** - 제출 시 실제 DB 반영
3. **Flyway 정리** 후 프로덕션 준비
4. **대결/과제 시스템 프론트 연결**
